(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{51:function(e,t,r){"use strict";var a,n=r(0),o=r.n(n),i=r(587),c=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),s=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},l=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&(r[a[n]]=e[a[n]])}return r};!function(e){e.NotAsked="NotAsked",e.Loading="Loading",e.LoadSuccess="LoadSuccess",e.LoadError="LoadError"}(a||(a={}));var u=function(e){function t(t){var r=e.call(this,t)||this;return r.initialState={hasBeenInView:!1,imageState:a.NotAsked},r.state=r.initialState,r.onInView=r.onInView.bind(r),r.onLoadSuccess=r.onLoadSuccess.bind(r),r.onLoadError=r.onLoadError.bind(r),r}return c(t,e),t.prototype.onInView=function(e){!0===e&&(this.props.src?(this.setState(function(e,t){return s({},e,{imageState:a.Loading})}),m({src:this.props.src,srcSet:this.props.srcSet,alt:this.props.alt,sizes:this.props.sizes},this.props.experimentalDecode).then(this.onLoadSuccess).catch(this.onLoadError)):this.setState(function(e,t){return s({},e,{imageState:a.LoadSuccess})}))},t.prototype.onLoadSuccess=function(){this.setState(function(e,t){return s({},e,{imageState:a.LoadSuccess})})},t.prototype.onLoadError=function(){this.setState(function(e,t){return s({},e,{imageState:a.LoadError})})},t.prototype.render=function(){var e=this,t=this.props,r=t.children,n=t.loadEagerly,c=t.observerProps,u=(t.experimentalDecode,l(t,["children","loadEagerly","observerProps","experimentalDecode"]));return n?r({imageState:a.LoadSuccess,imageProps:u}):o.a.createElement(i.a,s({rootMargin:"50px 0px",threshold:.01},c,{onChange:this.onInView,triggerOnce:!0}),function(t){var a=t.ref;return r({imageState:e.state.imageState,imageProps:u,ref:a})})},t.displayName="LazyImageFull",t}(o.a.Component),m=function(e,t){var r=e.src,a=e.srcSet,n=e.alt,o=e.sizes;return void 0===t&&(t=!1),new Promise(function(e,i){var c=new Image;a&&(c.srcset=a),n&&(c.alt=n),o&&(c.sizes=o),c.src=r,t&&"decode"in c?c.decode().then(function(){return e()}).catch(function(e){return i(e)}):(c.onload=e,c.onerror=i)})},d=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},f=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&(r[a[n]]=e[a[n]])}return r},g=function(e){var t=e.actual,r=e.placeholder,n=e.loading,i=e.error,c=f(e,["actual","placeholder","loading","error"]);return o.a.createElement(u,d({},c),function(e){var o=e.imageState,c=e.imageProps,s=e.ref;switch(o){case a.NotAsked:return!!r&&r({imageProps:c,ref:s});case a.Loading:return n?n():!!r&&r({imageProps:c,ref:s});case a.LoadSuccess:return t({imageProps:c});case a.LoadError:return i?i():t({imageProps:c})}})};g.displayName="LazyImage",r.d(t,"b",function(){return g}),r.d(t,"a",function(){return a}),r.d(t,"c",function(){return u})},55:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r(0),n=r.n(a),o=function(e){var t=e.children;return n.a.createElement("div",{className:"pa3 near-black bg-washed-yellow"},n.a.createElement("div",{className:"flex justify-center items-center",style:{minHeight:"calc(100vh + 100px)"}},n.a.createElement("p",{className:"f3 sans-serif lh-copy measure-narrow"},"Scroll down to see the photos :)",n.a.createElement("br",null),"You might want to throttle the network in your dev tools to see the effect.")),n.a.createElement("div",{className:"mw6"},t))}},588:function(e,t,r){r(244),r(589),e.exports=r(590)},590:function(e,t,r){"use strict";r.r(t),function(e){r(0);var t=r(143),a=r(586),n=r(39);r(662);Object(n.setDefaults)({header:!1,inline:!0}),Object(a.setOptions)({name:"React Lazy Images",url:"https://github.com/fpapado/react-lazy-images",addonPanelInRight:!0});var o=r(667);Object(t.configure)(function(){o.keys().forEach(o)},e)}.call(this,r(221)(e))},612:function(e,t,r){var a={"./nestedObjectAssign":534,"./nestedObjectAssign.js":534};function n(e){var t=o(e);return r(t)}function o(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}n.keys=function(){return Object.keys(a)},n.resolve=o,e.exports=n,n.id=612},667:function(e,t,r){var a={"./LazyImage.story.tsx":668,"./LazyImageFull.story.tsx":670};function n(e){var t=o(e);return r(t)}function o(e){var t=a[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}n.keys=function(){return Object.keys(a)},n.resolve=o,e.exports=n,n.id=667},668:function(e,t,r){"use strict";r.r(t),function(e){var t=r(0),a=r.n(t),n=r(143),o=r(39),i=r(51),c=r(55),s=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},l=function(){return a.a.createElement("img",{src:"img/porto_buildings_lowres.jpg",alt:"Buildings with tiled exteriors, lit by the sunset.",className:"w-100"})},u=function(){return a.a.createElement("img",{src:"img/porto_buildings_large.jpg",alt:"Buildings with tiled exteriors, lit by the sunset.",className:"w-100"})};Object(n.storiesOf)("LazyImage",e).add("Basic use",Object(o.withInfo)("Component that preloads the image once in the viewport and only swaps once ready")(function(){return a.a.createElement(c.a,null,a.a.createElement(i.b,{src:"img/porto_buildings_large.jpg",alt:"Buildings with tiled exteriors, lit by the sunset.",placeholder:function(e){var t=e.imageProps,r=e.ref;return a.a.createElement("img",{ref:r,src:"img/porto_buildings_lowres.jpg",alt:t.alt,className:"w-100"})},actual:function(e){var t=e.imageProps;return a.a.createElement("img",s({},t,{className:"w-100"}))}}))})).add("With srcSet",Object(o.withInfo)("With srcset, the browser decides which image to load. In that case, src is not informative enough for preloading. You can use the `srcSet` prop to provide that additional information to LazyImage.")(function(){return a.a.createElement(c.a,null,a.a.createElement(i.b,{src:"https://www.fillmurray.com/g/300/200",srcSet:"https://www.fillmurray.com/g/900/600 900w, https://www.fillmurray.com/g/600/400 600w, https://www.fillmurray.com/g/300/200 300w",alt:"A portrait of Bill Murray.",placeholder:function(e){var t=e.imageProps,r=e.ref;return a.a.createElement("img",{ref:r,src:"https://www.fillmurray.com/g/60/40",alt:t.alt,className:"w-100"})},actual:function(e){var t=e.imageProps;return a.a.createElement("img",s({},t,{className:"w-100"}))}}))})).add("Eager loading (Server-Side Rendering)",Object(o.withInfo)("Always load an image (i.e. eagerly; how the browser does it already). Useful if you want to load the actual content without waiting for Javascript. You should consider where you need this pattern. See the relevant section in README.md for more.")(function(){return a.a.createElement(c.a,null,a.a.createElement(i.b,{loadEagerly:!0,src:"img/porto_buildings_large.jpg",placeholder:function(){return a.a.createElement(l,null)},actual:function(){return a.a.createElement(u,null)}}))})).add("Eagerly load some images",Object(o.withInfo)("This is an example of how you can use loadEagerly to load important content directly, and defer the rest.")(function(){return a.a.createElement(c.a,null,[["first","30/20","300/200"],["second","60/40","600/400"],["third","90/60","900/600"]].map(function(e,t){var r=e[0],n=e[1],o=e[2];return a.a.createElement(i.b,{loadEagerly:0===t,key:r,src:"https://www.fillmurray.com/g/"+o,alt:"A portrait of Bill Murray.",placeholder:function(e){var t=e.imageProps,r=e.ref;return a.a.createElement("img",{src:"https://www.fillmurray.com/g/"+n,ref:r,alt:t.alt,className:"w-100"})},actual:function(e){var t=e.imageProps;return a.a.createElement("img",s({},t,{className:"w-100"}))}})}))})).add("Loading state",Object(o.withInfo)("Loading")(function(){return a.a.createElement(c.a,null,a.a.createElement("div",{className:"bg-light-silver h5 w-100"},a.a.createElement(i.b,{src:"img/porto_buildings_large.jpg",placeholder:function(e){var t=e.ref;return a.a.createElement("div",{ref:t})},actual:function(){return a.a.createElement(u,null)},loading:function(){return a.a.createElement("div",null,a.a.createElement("p",{className:"pa3 f5 lh-copy near-white"},"Loading..."))}})))})).add("Loading and Error states",Object(o.withInfo)("Loading and Error states are exposed as render props")(function(){return a.a.createElement(c.a,null,a.a.createElement("div",{className:"bg-light-silver h5 w-100"},a.a.createElement(i.b,{src:"https://www.fillmurray.com/notanimage",placeholder:function(e){var t=e.ref;return a.a.createElement("div",{ref:t})},actual:function(e){var t=e.imageProps;return a.a.createElement("img",s({},t))},loading:function(){return a.a.createElement("div",null,a.a.createElement("p",{className:"pa3 f5 lh-copy near-white"},"Loading..."))},error:function(){return a.a.createElement("div",{className:"bg-light-red h-100 w-100 $"},a.a.createElement("p",null,"There was an error fetching this image :("))}})))})).add("Horizontal scroll",Object(o.withInfo)("Horizontal scrolling should work out of the box.")(function(){return a.a.createElement(c.a,null,a.a.createElement("div",{className:"flex flex-row mw6 overflow-x-auto"},[["first","30/20","300/200"],["second","60/40","600/400"],["third","90/60","900/600"]].map(function(e,t){var r=e[0],n=e[1],o=e[2];return a.a.createElement("div",{key:r,className:"w5 pa3 mr3 ba bw1 b--near-black flex-shrink-0"},a.a.createElement(i.b,{key:r,src:"https://www.fillmurray.com/g/"+o,alt:"A portrait of Bill Murray.",placeholder:function(e){var t=e.imageProps,r=e.ref;return a.a.createElement("img",{src:"https://www.fillmurray.com/g/"+n,ref:r,alt:t.alt,className:"w-100"})},actual:function(e){var t=e.imageProps;return a.a.createElement("img",s({},t,{className:"w-100"}))}}))})))})).add("Experimental decode",Object(o.withInfo)("Decode off-main-thread before appending. Only supported in some browsers, but uses normal API otherwise. Test before using!")(function(){return a.a.createElement(c.a,null,a.a.createElement(i.b,{src:"img/porto_buildings_large.jpg",alt:"Buildings with tiled exteriors, lit by the sunset.",placeholder:function(e){var t=e.imageProps,r=e.ref;return a.a.createElement("img",{ref:r,src:"img/porto_buildings_lowres.jpg",alt:t.alt,className:"w-100"})},actual:function(e){var t=e.imageProps;return a.a.createElement("img",s({},t,{className:"w-100"}))},experimentalDecode:!0}))})).add("Background image",Object(o.withInfo)("You are in control of what gets rendered, so you can set the url of the background image, and swap in a component that uses it on load. It is not much different from the basic use case.")(function(){return a.a.createElement(c.a,null,a.a.createElement(i.b,{src:"img/porto_buildings_large.jpg",placeholder:function(e){var t=e.ref;return a.a.createElement("div",{ref:t,className:"$ w5 h5 contain bg-center",style:{backgroundImage:"url(img/porto_buildings_lowres.jpg)"}})},actual:function(e){var t=e.imageProps;return a.a.createElement("div",{className:"$ w5 h5 contain bg-center",style:{backgroundImage:"url("+t.src+")"}})}}))}))}.call(this,r(221)(e))},670:function(e,t,r){"use strict";r.r(t),function(e){var t=r(0),a=r.n(t),n=r(143),o=r(39),i=r(51),c=r(55),s=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};Object(n.storiesOf)("LazyImageFull",e).add("Basic use",Object(o.withInfo)("LazyImageFull gives you more fine-grained control over the rendering, by passing the state to the render prop.\n    Useful if you are doing css transitions, and where only some parts of the tree need to change.\n    Anything you can implement with LazyImage, you can implement with LazyImageFull.")(function(){return a.a.createElement(c.a,null,a.a.createElement(i.c,{src:"img/porto_buildings_large.jpg",alt:"Buildings with tiled exteriors, lit by the sunset."},function(e){var t=e.imageState,r=e.imageProps,n=e.ref;return a.a.createElement("img",s({},r,{ref:n,src:t===i.a.LoadSuccess?r.src:"img/porto_buildings_lowres.jpg",className:"w-100"}))}))}))}.call(this,r(221)(e))}},[[588,3,2]]]);
//# sourceMappingURL=preview.961b54893c6cc52396ea.bundle.js.map